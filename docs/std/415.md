###### #std415

# Ограничения на использование ключевого слова `#!sdbl РАЗРЕШЕННЫЕ` в запросах

`#!sdbl РАЗРЕШЕННЫЕ` скрывает недоступные пользователю данные.
Это может исказить результат запроса и нарушить бизнес-логику.

###### 1.

Не используйте `#!sdbl РАЗРЕШЕННЫЕ` в запросах, которые влияют на расчеты и проведение операций.

Если для выполнения операции нужны данные, к которым у пользователя нет доступа:

- либо предоставьте права чтения на требуемые данные;
- либо прервите операцию с сообщением о недостатке прав.

!!! example "Например"

    В механизмах расчета списания себестоимости использование `#!sdbl РАЗРЕШЕННЫЕ` может дать разный результат у разных пользователей.

!!! failure "Неправильно"

    ```bsl hl_lines="3"
    // Влияющий на расчет запрос: данные скрываются и результат искажается.
    Запрос = Новый Запрос(
        "ВЫБРАТЬ РАЗРЕШЕННЫЕ
        |   Партии.Номенклатура,
        |   Партии.СтоимостьОстаток
        |ИЗ
        |   РегистрНакопления.ПартииТоваровОрганизаций.Остатки КАК Партии");
    ```

!!! success "Правильно"

    ```bsl hl_lines="2-4"
    // Если доступ к данным для расчета отсутствует, операцию нужно прервать.
    Если Не ЕстьПраваДляРасчетаСебестоимости Тогда
        ВызватьИсключение НСтр("ru='Недостаточно прав для расчета себестоимости.'");
    КонецЕсли;

    Запрос = Новый Запрос(
        "ВЫБРАТЬ
        |   Партии.Номенклатура,
        |   Партии.СтоимостьОстаток
        |ИЗ
        |   РегистрНакопления.ПартииТоваровОрганизаций.Остатки КАК Партии");
    ```

###### 2.

`#!sdbl РАЗРЕШЕННЫЕ` допустимо, когда скрываемые данные не участвуют в бизнес-процессах.

!!! example "Например"

    Если у пользователя нет доступа к контактной информации контактных лиц контрагентов, это допустимо, когда эта информация не влияет на выполнение операций.

###### Источник

https://its.1c.ru/db/v8std#content:415
